<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Document</title>

	<style>
		:root {
			color-scheme: light dark;
		}
	</style>

	<script>
		/**
		 * @param {GeolocationPosition} e
		 */
		function onSuccess(e) {
			console.log("Success");

			const div = document.createElement("div");

			const h2 = document.createElement("h2");
			h2.textContent = new Date(e.timestamp).toLocaleTimeString();
			div.appendChild(h2);

			Object.entries(e.coords).forEach(([k, v]) => {
				const p = document.createElement("p");
				p.textContent = `${k}: ${v}`;
				div.appendChild(p);
			});

			document.body.appendChild(div);
		}

		/**
		 * @param {GeolocationPositionError} e
		 */
		function onError(e) {
			console.error("Sth failed");

			// Show error message in body
			const p = document.createElement("p");
			p.textContent = `${e.code}: ${e.message}`;
			document.body.appendChild(p);
		}

		function currentPos() {
			console.log("Button pressed");
			navigator.geolocation.getCurrentPosition(onSuccess, onError);
		}

		function watchPos() {
			console.log("Button pressed");
			navigator.geolocation.watchPosition((e) => onSuccess, onError);
		}
	</script>
</head>

<body>
	<p>Works!</p>
	<h1>Geolocation</h1>
	<button type="button" onclick="currentPos()">Get current position</button>
	<button type="button" onclick="watchPos()">Watch position</button>
</body>

</html>